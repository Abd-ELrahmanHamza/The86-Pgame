;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Written by : - Abdelrahman Hamza and Ziad Sherif  13-12-2021                        ;;;;;
; parameters : -                                                                      ;;;;;
;   Destination string that you want to check                                         ;;;;;
;   Array of registers Names : -                                                      ;;;;;
;    'ax','bx','cx','dx','si','di','bp','sp','ah','al','bh','bl','ch','cl','dh','dl'  ;;;;;
;   registersOffsets => Marco handel its values we need it only to have 16 words      ;;;;;
;   destination the memory that you will recieve your result offset in it             ;;;;;
;   flag 1 => means not valid regardless value of destination                         ;;;;;
;   typeOfDestination => 1h means memory , 0h => means register                       ;;;;;
;A macro that fills registersOffsets array with offsets of registers array            ;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
validateRegisterDirect MACRO Names,offsets,regName,destination,flag                      ;;
                                                                                         ;;
    LOCAL foundRD                                                                        ;;
    LOCAL notFoundRD                                                                     ;;
    LOCAL exit_vrd                                                                       ;;
    ; mov ah,9h                                                                            ;;
    ; mov dx,offset regName                                                                ;;
    ; int 21h                                                                              ;;
    mov dx,word ptr regName+1                                                            ;;
                                                                                         ;;
    validateRegister Names,offsets,dx,destination,flag                                   ;;
                                                                                         ;;
    mov bx,word ptr regName+1                                                            ;;
                                                                                         ;;
    mov ax, 'xb'                                                                         ;;
    ; if regName == 'BX'                                                                 ;;
    cmp ax, bx                                                                           ;;
        jz foundRD                                                                       ;;
                                                                                         ;;
    mov ax, 'is'                                                                         ;;
    ; if regName == 'SI'                                                                 ;;
    cmp ax, bx                                                                           ;;
        jz foundRD                                                                       ;;
                                                                                         ;;
    mov ax, 'id'                                                                         ;;
    ; if regName == 'DI'                                                                 ;;
    cmp ax, bx                                                                           ;;
        jz foundRD                                                                       ;;
                                                                                         ;;
    jmp notFoundRD                                                                       ;;
    ; if valid register dircet mode [BX],[SI],[DI]                                       ;;
    foundRD:                                                                             ;;
        mov di,destination                                                               ;;
        mov bx,[di]                                                                      ;;
        mov di,offset destination                                                        ;;
        mov [di],bx                                                                      ;;
        jmp exit_vrd                                                                     ;;
    notFoundRD:                                                                          ;;
        mov flag,01h                                                                     ;;
    exit_vrd:                                                                            ;;
ENDM                                                                                     ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Written by : - Abdelrahman Hamza and Ziad Sherif  13-12-2021                        ;;;;;
; parameters : -                                                                      ;;;;;
;   Destination string that you want to check                                         ;;;;;
;   Array of registers Names : -                                                      ;;;;;
;    'ax','bx','cx','dx','si','di','bp','sp','ah','al','bh','bl','ch','cl','dh','dl'  ;;;;;
;   registersOffsets => Marco handel its values we need it only to have 16 words      ;;;;;
;   destination the memory that you will recieve your result offset in it             ;;;;;
;   flag 1 => means not valid regardless value of destination                         ;;;;;
;   typeOfDestination => 1h means memory , 0h => means register                       ;;;;;
;A macro that fills registersOffsets array with offsets of registers array            ;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
validateRegisterDirectSource MACRO Names,offsets,regName,source,flag                      ;;
                                                                                         ;;
    LOCAL foundRD                                                                        ;;
    LOCAL notFoundRD                                                                     ;;
    LOCAL exit_vrd                                                                       ;;
    ; mov ah,9h                                                                            ;;
    ; mov dx,offset regName                                                                ;;
    ; int 21h                                                                              ;;
    mov dx,word ptr regName+1                                                            ;;
                                                                                         ;;
    validateRegister Names,offsets,dx,source,flag                                   ;;
                                                                                         ;;
    mov bx,word ptr regName+1                                                            ;;
                                                                                         ;;
    mov ax, 'xb'                                                                         ;;
    ; if regName == 'BX'                                                                 ;;
    cmp ax, bx                                                                           ;;
        jz foundRD                                                                       ;;
                                                                                         ;;
    mov ax, 'is'                                                                         ;;
    ; if regName == 'SI'                                                                 ;;
    cmp ax, bx                                                                           ;;
        jz foundRD                                                                       ;;
                                                                                         ;;
    mov ax, 'id'                                                                         ;;
    ; if regName == 'DI'                                                                 ;;
    cmp ax, bx                                                                           ;;
        jz foundRD                                                                       ;;
                                                                                         ;;
    jmp notFoundRD                                                                       ;;
    ; if valid register dircet mode [BX],[SI],[DI]                                       ;;
    foundRD:                                                                             ;;
        mov di,source                                                               ;;
        mov bx,[di]                                                                      ;;
        mov di,offset source                                                        ;;
        mov [di],bx                                                                      ;;
        jmp exit_vrd                                                                     ;;
    notFoundRD:                                                                          ;;
        mov flag,01h                                                                     ;;
    exit_vrd:                                                                            ;;
ENDM                                                                                     ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;