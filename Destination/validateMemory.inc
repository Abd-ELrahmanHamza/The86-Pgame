
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Written by : - Abdelrahman Hamza  12-12-2021                                        ;;
; parameters : - a number represented as a string you want to validate                ;;
; return     : - flag = 1 if not valid memory else not affect it                      ;;
;A macro that validate a number => has spaces and 0,1,...f                            ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
validateMemory MACRO string,flag,destination                                          ;;
pusha                                                                                 ;;
    removeSpaces string                                                               ;;
    popa                                                                              ;;
    mov bx,offset string                                                              ;;
    mov si,offset string                                                              ;;
                                                                                      ;;
    GoToStringEnd:                                                                    ;;
        cmp [si],'$'                                                                  ;;
        inc si                                                                        ;;
        cmp [si],'$'                                                                  ;;
    jnz GoToStringEnd                                                                 ;;
    dec si                                                                            ;;
                                                                                      ;;
    cmp [bx],'['                                                                      ;;
    jnz compareEnd                                                                    ;;
        cmp [si],']'                                                                  ;;
        jnz notValidSquare                                                            ;;
        jmp WithSquareBracktes                                                        ;;
        compareEnd: cmp [si],']'                                                      ;;
        jz notValidSquare                                                             ;;
        jmp noSqaure                                                                  ;;
    notValidSquare: mov flag,0001h                                                    ;;
    jmp done                                                                          ;;
    WithSquareBracktes:                                                               ;;
    inc bx                                                                            ;;
    mov [si],'$'                                                                      ;;
    pusha                                                                             ;;
    validateNumbers bx,flag                                                           ;;
    popa                                                                              ;;
    jmp done                                                                          ;;
    noSqaure:                                                                         ;;
    pusha                                                                             ;;
    validateNumbers bx,flag                                                           ;;
    popa                                                                              ;;
    done:                                                                             ;;
    mov destination,bx                                                                ;;
ENDM                                                                                  ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;