;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Written by : - Ziad Sherif  13-12-2021                                              ;;
; parameters : - array of reg names, array of corresponding offsets                   ;;
;                register name, destination,flag                                      ;;
; return     : - destination offset and a flag => 1 means not found else not affected ;;
;A macro that fills registersOffsets array with offsets of registers array            ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
validateRegister MACRO Names,offsets,reg,destination,flag                             ;;                                                  
    LOCAL mainLoop                                                                    ;;          
    LOCAL found                                                                       ;;      
    LOCAL NotFirst                                                                    ;;          
    LOCAL notFound                                                                    ;;          
    LOCAL done                                                                        ;;      
    mov cx,30                                                                         ;;      
    mainLoop:                                                                         ;;      
        mov bx,cx                                                                     ;;          
        mov ax,Names[bx]                                                              ;;                  
        cmp ax,reg                                                                    ;;          
        jz found                                                                      ;;          
        dec cx                                                                        ;;      
    loop mainLoop                                                                     ;;          
    found:                                                                            ;;  
    mov ax,Names                                                                      ;;          
    cmp ax,reg                                                                        ;;      
    jnz NotFirst                                                                      ;;          
        mov ax,word ptr offsets                                                       ;;                      
        mov destination,ax                                                            ;;
        jmp done                                                                      ;;
    NotFirst:                                                                         ;;      
    mov ax,0                                                                          ;;      
    cmp cx,ax                                                                         ;;      
    jz notFound                                                                       ;;      
        mov bx,cx                                                                     ;;          
        mov ax,word ptr offsets[bx]                                                   ;;                          
        mov destination,ax                                                            ;;                  
        jmp done                                                                      ;;          
    notFound:                                                                         ;;      
        mov flag,1                                                                    ;;          
    done:                                                                             ;;  
ENDM                                                                                  ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;